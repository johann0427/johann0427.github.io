<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Video Preview</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: black;
    }
    iframe, #player {
      width: 100vw;
      height: 100vh;
      border: none;
    }
  </style>
</head>
<body>
  <div id="player"></div>
  <script>
    const params = new URLSearchParams(location.search);
    const videoId = params.get('video');       // YouTube videoId
    const twitchChannel = params.get('twitch'); // Twitch channel name
    const parent = params.get('parent');

    if (videoId) {
      // --- YouTube ---
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      document.head.appendChild(tag);

      window.onYouTubeIframeAPIReady = function() {
        new YT.Player('player', {
          videoId,
          playerVars: {
            autoplay: 1,
            mute: 0,
            playsinline: 1,
            controls: 0,
            modestbranding: 1,
            rel: 0
          },
          events: {
            onReady: e => {
              e.target.setVolume(20); // 預設音量 20%
            }
          }
        });
      };

    } else if (twitchChannel) {
      // --- Twitch ---
      const iframe = document.createElement('iframe');
      iframe.src = `https://player.twitch.tv/?channel=${encodeURIComponent(twitchChannel)}&parent=${encodeURIComponent(parent)}&autoplay=true&muted=true`;
      iframe.allow = 'autoplay; encrypted-media';
      document.body.appendChild(iframe);

    } else {
      document.body.textContent = '⚠️ No video ID or Twitch channel provided.';
    }
  </script>
</body>
</html>


